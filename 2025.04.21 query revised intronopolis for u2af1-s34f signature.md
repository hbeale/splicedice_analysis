# 2025.04.21 query revised intronopolis for u2af1-s34f signature

We originally tried to query intropolis to identify any samples containing the u2af1-s34f signature, but all output was nan. 
I believe this is because the allPS coordinate method and junction definition IDs have changed. Details below. 

I have [modified](https://github.com/hbeale/splicedice_analysis/blob/main/2025_04_02-2025_04_07.md) the coordinates in intronopolis to match luad. 
Here I will requery intropolis to identify any samples containing the u2af1-s34f signature

This analysis is impacted by a decision i made while converting the intropolis data to the newer coordinate space: I only used junctions that were present in the LUAD dataset. 

server: 10.50.100.135

### designate output
```
new_timestamp=`~/d`
echo $new_timestamp
splicedice_out=/mnt/output/splicedice_${new_timestamp}/ 
mkdir -p $splicedice_out
```

```
2025.04.21_18.21.29
```

### prepare files

I need to decompress PS file. Check how much space is available and how big the intropolis files are

commands
```
df -h | grep mnt
ls -alth 2020.11.16.intropolis_PS.in_luad.tsv.gz 2020.11.16.intropolis_PS.tsv
```

output
```
ubuntu@hbeale-mesa:/mnt/data$ df -h | grep mnt
/dev/vdb1       2.0T  1.3T  766G  63% /mnt

ubuntu@hbeale-mesa:/mnt/data$ ls -alth *intro*
-rw-rw-r-- 1 ubuntu ubuntu 7.9G Apr  8 00:26 2020.11.16.intropolis_PS.in_luad.tsv.gz
-rwxr-xr-x 1 ubuntu ubuntu 921G Mar  6 22:20 2020.11.16.intropolis_PS.tsv
```

I don't currently have enough space to decompress 2020.11.16.intropolis_PS.in_luad.tsv.gz. Compress 2020.11.16.intropolis_PS.tsv

```
pigz 2020.11.16.intropolis_PS.tsv; ~/alertme.sh 
```

Recheck how much space is available and how big the intropolisfiles are

commands
```
df -h | grep mnt
ls -alth 2020.11.16.intropolis_PS.in_luad.tsv* 2020.11.16.intropolis_PS.tsv*
```
output

```
/dev/vdb1       2.0T  391G  1.7T  20% /mnt
-rw-rw-r-- 1 ubuntu ubuntu 7.9G Apr  8 00:26 2020.11.16.intropolis_PS.in_luad.tsv.gz
-rwxr-xr-x 1 ubuntu ubuntu  29G Mar  6 22:20 2020.11.16.intropolis_PS.tsv.gz
```

looks good; uncompress in the in_luad data
```
date; gzip -d --keep 2020.11.16.intropolis_PS.in_luad.tsv.gz; date; ~/alertme.sh 
```
output
```
Mon Apr 21 21:39:09 UTC 2025
```
# Next, not yet run!
### Run splicedice

```
analysis_name=find_u2af1_sig_in_intropolis
sig_script=/mnt/code/dennisrm_splicedice/splicedice/code/signature.py 
samples_PS_file=/mnt/data/2020.11.16.intropolis_PS.in_luad.tsv   
beta_file=/mnt/output/splicedice_2025.02.20_18.42.32/beta.tsv
cd $splicedice_out

date; python3 $sig_script query \
-p $samples_PS_file \
--n_threads 6 \
-b $beta_file \
-o $splicedice_out/$analysis_name; date; ~/alertme.sh
```

output
```
```


check server resource usage

top

```
                                                                            
```

more top
```
```

completed FILL IN TIME HERE


### check results

```
zcat $splicedice_out/${analysis_name}.pvals.tsvv  | rowsToCols stdin stdout -tab -varCol | head

```


```
date; pigz $splicedice_out/${analysis_name}.pvals.tsv; date; ~/alertme.sh
```
